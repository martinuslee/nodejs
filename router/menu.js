const express = require("express");
const apiRouter = express.Router();
const axios = require("axios"); //html로 웹자료를 get
const cheerio = require("cheerio"); //html을 JS로 변환

let $href = [];
axios
  .get(`https://sejong.korea.ac.kr/campuslife/facilities/dining/weeklymenu`)
  .then((response) => {
    const $ = cheerio.load(response.data);
    // $(".buttonGo floatR").each((index, item) => {
    //    menulink = item.attribs.href;
    // });
    links = $("a");
    $(links).each((i, link) => {
      //console.log(i + ' : ' + $(link).text() +': '+$(link).attr('href')+ '\n');
      if ($(link).text() === "교직원식당 주간 메뉴")
        $href.push($(link).attr("href"));
    });
    console.log("https://sejong.korea.ac.kr" + $href);
  });

apiRouter.post("/menu", function (req, res) {
  console.log(req.body);

  const responseBody = {
    version: "2.0",
    template: {
      outputs: [
        {
          basicCard: {
            title: "금주의 교직원 식당 식단표입니다",
            description: "아래 버튼을 클릭해서 확인해주세요!",
            thumbnail: {
              imageUrl:
                "data:image/jpeg;base64,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",
            },
            buttons: [
              {
                action: "webLink",
                label: "Link Button",
                webLinkUrl: "https://sejong.korea.ac.kr" + $href,
              },
            ],
          },
        },
      ],
    },
  };

  res.status(200).send(responseBody);
});

module.exports = apiRouter;
